<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1024px" preserveAspectRatio="none" style="width:951px;height:1024px;" version="1.1" viewBox="0 0 951 1024" width="951px" zoomAndPan="magnify"><defs><filter height="300%" id="fy2wmrjivh2xr" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="1009.3906" style="stroke: #A80036; stroke-width: 1.0;" width="149" x="530" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="579" y="16.0669">Globes</text><rect fill="#FFFFFF" filter="url(#fy2wmrjivh2xr)" height="416.9375" style="stroke: #000000; stroke-width: 2.0;" width="882.5" x="47" y="434.8906"/><rect fill="#FFFFFF" filter="url(#fy2wmrjivh2xr)" height="385.8047" style="stroke: #000000; stroke-width: 2.0;" width="862.5" x="57" y="459.0234"/><rect fill="#FFFFFF" height="43.9375" style="stroke: none; stroke-width: 1.0;" width="862.5" x="57" y="562.4219"/><rect fill="#FFFFFF" height="71.9375" style="stroke: none; stroke-width: 1.0;" width="862.5" x="57" y="606.3594"/><rect fill="#FFFFFF" height="166.5313" style="stroke: none; stroke-width: 1.0;" width="862.5" x="57" y="678.2969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="40" x2="40" y1="86.2969" y2="505.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="40" x2="40" y1="505.2891" y2="533.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="40" x2="40" y1="533.2891" y2="621.1641"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="40" x2="40" y1="621.1641" y2="649.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="40" x2="40" y1="649.1641" y2="680.2969"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="40" x2="40" y1="680.2969" y2="708.2969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="40" x2="40" y1="708.2969" y2="762.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="40" x2="40" y1="762.5625" y2="790.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="40" x2="40" y1="790.5625" y2="927.0938"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="303" x2="303" y1="86.2969" y2="505.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="303" x2="303" y1="505.2891" y2="533.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="303" x2="303" y1="533.2891" y2="621.1641"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="303" x2="303" y1="621.1641" y2="649.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="303" x2="303" y1="649.1641" y2="680.2969"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="303" x2="303" y1="680.2969" y2="708.2969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="303" x2="303" y1="708.2969" y2="762.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="303" x2="303" y1="762.5625" y2="790.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="303" x2="303" y1="790.5625" y2="927.0938"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="566" x2="566" y1="86.2969" y2="505.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="566" x2="566" y1="505.2891" y2="533.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="566" x2="566" y1="533.2891" y2="621.1641"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="566" x2="566" y1="621.1641" y2="649.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="566" x2="566" y1="649.1641" y2="680.2969"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="566" x2="566" y1="680.2969" y2="708.2969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="566" x2="566" y1="708.2969" y2="762.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="566" x2="566" y1="762.5625" y2="790.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="566" x2="566" y1="790.5625" y2="927.0938"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="642" x2="642" y1="86.2969" y2="505.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="642" x2="642" y1="505.2891" y2="533.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="642" x2="642" y1="533.2891" y2="621.1641"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="642" x2="642" y1="621.1641" y2="649.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="642" x2="642" y1="649.1641" y2="680.2969"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="642" x2="642" y1="680.2969" y2="708.2969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="642" x2="642" y1="708.2969" y2="762.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="642" x2="642" y1="762.5625" y2="790.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="642" x2="642" y1="790.5625" y2="927.0938"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="817.5" x2="817.5" y1="86.2969" y2="505.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="817.5" x2="817.5" y1="505.2891" y2="533.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="817.5" x2="817.5" y1="533.2891" y2="621.1641"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="817.5" x2="817.5" y1="621.1641" y2="649.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="817.5" x2="817.5" y1="649.1641" y2="680.2969"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="817.5" x2="817.5" y1="680.2969" y2="708.2969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="817.5" x2="817.5" y1="708.2969" y2="762.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="817.5" x2="817.5" y1="762.5625" y2="790.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="817.5" x2="817.5" y1="790.5625" y2="927.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="8" y="82.9951">operator</text><ellipse cx="40.5" cy="13" fill="#FEFECE" filter="url(#fy2wmrjivh2xr)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M40.5,21 L40.5,48 M27.5,29 L53.5,29 M40.5,48 L27.5,63 M40.5,48 L53.5,63 " fill="none" filter="url(#fy2wmrjivh2xr)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="8" y="939.0889">operator</text><ellipse cx="40.5" cy="952.3906" fill="#FEFECE" filter="url(#fy2wmrjivh2xr)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M40.5,960.3906 L40.5,987.3906 M27.5,968.3906 L53.5,968.3906 M40.5,987.3906 L27.5,1002.3906 M40.5,987.3906 L53.5,1002.3906 " fill="none" filter="url(#fy2wmrjivh2xr)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#fy2wmrjivh2xr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="239" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="246" y="70.9951">MQTT_4_globes</text><rect fill="#FEFECE" filter="url(#fy2wmrjivh2xr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="239" y="926.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="246" y="946.0889">MQTT_4_globes</text><rect fill="#FEFECE" filter="url(#fy2wmrjivh2xr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="538" y="47"/><rect fill="#FEFECE" filter="url(#fy2wmrjivh2xr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="534" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="541" y="70.9951">slaves</text><rect fill="#FEFECE" filter="url(#fy2wmrjivh2xr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="538" y="926.0938"/><rect fill="#FEFECE" filter="url(#fy2wmrjivh2xr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="534" y="930.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="541" y="950.0889">slaves</text><rect fill="#FEFECE" filter="url(#fy2wmrjivh2xr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="609" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="616" y="70.9951">master</text><rect fill="#FEFECE" filter="url(#fy2wmrjivh2xr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="609" y="926.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="616" y="946.0889">master</text><rect fill="#FEFECE" filter="url(#fy2wmrjivh2xr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="179" x="726.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="165" x="733.5" y="70.9951">MQTT_4_door_entrance</text><rect fill="#FEFECE" filter="url(#fy2wmrjivh2xr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="179" x="726.5" y="926.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="165" x="733.5" y="946.0889">MQTT_4_door_entrance</text><rect fill="#EEEEEE" filter="url(#fy2wmrjivh2xr)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="936.5" x="3" y="116.8633"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="939.5" y1="116.8633" y2="116.8633"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="939.5" y1="119.8633" y2="119.8633"/><rect fill="#EEEEEE" filter="url(#fy2wmrjivh2xr)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="42" x="450.25" y="106.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="456.25" y="122.3638">Init</text><polygon fill="#A80036" points="806,156.5625,816,160.5625,806,164.5625,810,160.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="642" x2="812" y1="160.5625" y2="160.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="649" y="155.4966">register</text><polygon fill="#A80036" points="314.5,185.6953,304.5,189.6953,314.5,193.6953,310.5,189.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="308.5" x2="641" y1="189.6953" y2="189.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="320.5" y="184.6294">register</text><polygon fill="#A80036" points="314.5,214.8281,304.5,218.8281,314.5,222.8281,310.5,218.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="308.5" x2="565.5" y1="218.8281" y2="218.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="320.5" y="213.7622">register</text><rect fill="#EEEEEE" filter="url(#fy2wmrjivh2xr)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="936.5" x="3" y="247.3945"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="939.5" y1="247.3945" y2="247.3945"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="939.5" y1="250.3945" y2="250.3945"/><rect fill="#EEEEEE" filter="url(#fy2wmrjivh2xr)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="111" x="415.75" y="236.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="92" x="421.75" y="252.895">Solve puzzle</text><polygon fill="#A80036" points="291.5,287.0938,301.5,291.0938,291.5,295.0938,295.5,291.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="40.5" x2="297.5" y1="291.0938" y2="291.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="239" x="47.5" y="286.0278">trigger: on [new_state, #participants]</text><polygon fill="#A80036" points="630,351.4922,640,355.4922,630,359.4922,634,355.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="303.5" x2="636" y1="355.4922" y2="355.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="239" x="310.5" y="350.4263">trigger: on [new_state, #participants]</text><path d="M647,304.0938 L647,389.0938 L906,389.0938 L906,314.0938 L896,304.0938 L647,304.0938 " fill="#FBFB77" filter="url(#fy2wmrjivh2xr)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M896,304.0938 L896,314.0938 L906,314.0938 L896,304.0938 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="653" y="321.1606">As JSON:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="653" y="336.2935">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="669" y="351.4263">"new_state": "&lt;new_state&gt;",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="669" y="366.5591">"#participants": "&lt;#participants&gt;"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="653" y="381.6919">}</text><polygon fill="#A80036" points="554.5,415.8906,564.5,419.8906,554.5,423.8906,558.5,419.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="303.5" x2="560.5" y1="419.8906" y2="419.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="239" x="310.5" y="414.8247">trigger: on [new_state, #participants]</text><path d="M47,434.8906 L124,434.8906 L124,441.8906 L114,451.8906 L47,451.8906 L47,434.8906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="416.9375" style="stroke: #000000; stroke-width: 2.0;" width="882.5" x="47" y="434.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="62" y="447.9575">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="266" x="139" y="447.1011">[door is open (state != inactive [closed])]</text><path d="M57,459.0234 L121,459.0234 L121,466.0234 L111,476.0234 L57,476.0234 L57,459.0234 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="385.8047" style="stroke: #000000; stroke-width: 2.0;" width="862.5" x="57" y="459.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="72" y="472.0903">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="174" x="136" y="471.2339">[on all globes are touched]</text><polygon fill="#A80036" points="806,493.2891,816,497.2891,806,501.2891,810,497.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="642" x2="812" y1="497.2891" y2="497.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="649" y="492.2231">trigger: off</text><polygon fill="#A80036" points="653,550.4219,643,554.4219,653,558.4219,649,554.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="647" x2="817" y1="554.4219" y2="554.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="659" y="549.356">status: inactive [closed]</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="57" x2="919.5" y1="563.4219" y2="563.4219"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="183" x="62" y="573.6323">[on any globe was released]</text><polygon fill="#A80036" points="806,594.3594,816,598.3594,806,602.3594,810,598.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="642" x2="812" y1="598.3594" y2="598.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="649" y="593.2935">trigger: on</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="57" x2="919.5" y1="607.3594" y2="607.3594"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="62" y="617.5698">[on error]</text><polygon fill="#A80036" points="314.5,666.2969,304.5,670.2969,314.5,674.2969,310.5,670.2969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="308.5" x2="641" y1="670.2969" y2="670.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="320.5" y="665.231">status: failed [error_json]</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="57" x2="919.5" y1="679.2969" y2="679.2969"/><polygon fill="#A80036" points="314.5,737.9961,304.5,741.9961,314.5,745.9961,310.5,741.9961" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="308.5" x2="641" y1="741.9961" y2="741.9961"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="320.5" y="736.9302">status: active [stateOfAllGlobes]</text><path d="M67,713.2969 L67,753.2969 L294,753.2969 L294,723.2969 L284,713.2969 L67,713.2969 " fill="#FBFB77" filter="url(#fy2wmrjivh2xr)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M284,713.2969 L284,723.2969 L294,723.2969 L284,713.2969 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="73" y="730.3638">The master publishes the states</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="73" y="745.4966">of all globes.</text><polygon fill="#A80036" points="314.5,820.2617,304.5,824.2617,314.5,828.2617,310.5,824.2617" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="308.5" x2="565.5" y1="824.2617" y2="824.2617"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="320.5" y="819.1958">message: active [id, isTouched]</text><path d="M91,795.5625 L91,835.5625 L294,835.5625 L294,805.5625 L284,795.5625 L91,795.5625 " fill="#FBFB77" filter="url(#fy2wmrjivh2xr)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M284,795.5625 L284,805.5625 L294,805.5625 L284,795.5625 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="97" y="812.6294">Type "MESSAGE" because of</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="97" y="827.7622">internal communication</text><polygon fill="#A80036" points="314.5,875.9609,304.5,879.9609,314.5,883.9609,310.5,879.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="308.5" x2="641" y1="879.9609" y2="879.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="320.5" y="874.895">status: solved</text><polygon fill="#A80036" points="51.5,905.0938,41.5,909.0938,51.5,913.0938,47.5,909.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="45.5" x2="302.5" y1="909.0938" y2="909.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="57.5" y="904.0278">status: solved</text><!--
@startuml group_4_puzzle_globes
actor operator
participant MQTT_4_globes
box "Globes"
    collections slaves
    participant master
end box
participant MQTT_4_door_entrance

== Init ==
master -> MQTT_4_door_entrance: register
master -> MQTT_4_globes: register
slaves -> MQTT_4_globes: register

== Solve puzzle ==
operator -> MQTT_4_globes: trigger: on [new_state, #participants]
MQTT_4_globes -> master: trigger: on [new_state, #participants]
note right
As JSON:
{
    "new_state": "<new_state>",
    "#participants": "<#participants>"
}
end note
MQTT_4_globes -> slaves: trigger: on [new_state, #participants]

loop door is open (state != inactive [closed])
    alt on all globes are touched
        master -> MQTT_4_door_entrance: trigger: off
        ...
        MQTT_4_door_entrance -> master: status: inactive [closed]
    else on any globe was released
        master -> MQTT_4_door_entrance: trigger: on
    else on error
        ...
        master -> MQTT_4_globes: status: failed [error_json]
    else
        ...
        master -> MQTT_4_globes: status: active [stateOfAllGlobes]
        note left
            The master publishes the states
            of all globes.
        end note
        ...
        slaves -> MQTT_4_globes: message: active [id, isTouched]
        note left
            Type "MESSAGE" because of
            internal communication
        end note
    end
end

MQTT_4_globes <- master: status: solved
operator <- MQTT_4_globes: status: solved
@enduml

PlantUML version 1.2019.09(Mon Aug 26 18:19:51 CEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.5+10-post-Ubuntu-0ubuntu1.118.04
Operating System: Linux
OS Version: 5.0.0-37-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>